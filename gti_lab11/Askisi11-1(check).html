<!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Άσκηση 11.1</title>
<style>
  table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
  }
  th, td {
    padding: 15px;
  }
  </style>
<script>
  var randomNumber, gameInterval;
  var secondsLeft = 0;
  var correctTries = 0;
  var totalTries = 0;
  function startGame() {
    // Αρχικοποίηση μεταβλητών
    const gameArray = document.getElementById("tbl_gameTable");
    randomNumber = Math.round((Math.random() * 6) + 3);
    secondsLeft = 30;
    clearInterval(gameInterval); // Μηδενισμός του interval σε περίπτωση που κάνει πολλές φορές ο χρήστης κλικ στην Εκκίνηση
    // Γέμισμα στοιχείων με αρχικές τιμές και καθαρισμός
    document.getElementById("div_randomNumber").innerHTML = "Κάνε κλικ στα πολλαπλάσια του: " + randomNumber;
    document.getElementById("div_remainingTime").innerHTML = "Χρόνος που απομένει: " + secondsLeft;    
    for (i=0; i < gameArray.rows.length; i++)
        for (j=0; j < gameArray.rows[i].cells.length; j++) {
          gameArray.rows[i].cells[j].innerHTML = Math.round((Math.random() * 100) + 1);
          gameArray.style = "background-color: white";
        }
    gameInterval = setInterval(updateTimer, 1000);
    // ΓΙΑ ΕΛΕΓΧΟ ΤΟΥ ΠΙΝΑΚΑ ΚΑΙ ΔΙΑΓΡΑΦΗ
    // for (i=0; i < gameArray.rows.length; i++)
    //     for (j=0; j < gameArray.rows[i].cells.length; j++) {
    //       if (gameArray.rows[i].cells[j].innerHTML < 20 || gameArray.rows[i].cells[j].innerHTML > 100)
    //         gameArray.rows[i].cells[j].style.background = "red";
    //       // if (gameArray.rows[i].cells[j] > 100)
    //       // gameArray.rows[i].cells[j].style.background = "red";
    //     }

  }
  function updateTimer() {
    if (secondsLeft > 0){
      secondsLeft--;
      document.getElementById("div_remainingTime").innerHTML = "Χρόνος που απομένει: " + secondsLeft;
    }
    else {
      var finalScore = (correctTries / totalTries) * 100;
      alert("* GAME OVER *" + "\nΣυνολικές προσπάθειες: " + totalTries + "\nΣωστές προσπάθειες: " + correctTries + "\nΠοσοστό επιτυχίας: " + finalScore + "%")
      clearInterval(gameInterval);
    }
  }
  function checkNumber(evt) {
    var selectedCell = evt.target.innerHTML;
    if (selectedCell % randomNumber == 0) {
      correctTries++;
      totalTries++;
      evt.target.style = "background-color: green";
    }
    else {
      evt.target.style = "background-color: red";
      totalTries++;
    }
  }
</script>
</head>
<body>
  <input id="btn_fill" type="button" onclick="startGame()" value="Εκκίνηση παιχνιδιού">
  <div id="div_randomNumber" style="height: 5ch; font-size: xx-large; padding-top: 20px;">
    
  </div>
  <table id="tbl_gameTable" style="border:inset; padding: 5px;" onclick="checkNumber(event)">
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </table>
    <br>
    <div id="div_remainingTime" style="height: 5ch; font-size: xx-large; padding-top: 20px;"></div>
  </body>
</html>